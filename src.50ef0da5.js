parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"w0rA":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,n=arguments[3];!function(n,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof t&&t.amd?t(o):n.microcan=o()}(this,function(){"use strict";const t=(t,n)=>{const o=(...e)=>{if(e.length>=t.length)return t(...e);const i=(...t)=>o(...e,...t);return n&&(i.toString=function(){return n}),i};return n&&(o.toString=function(){return n}),o},n=2*Math.PI,o=[0,0,0,0];return function(e,[i,r]){let s=i,l=r,c=e;const u=[];let a={size:14,font:"Arial",modifier:""},f=[0,0,0,1],p=[0,0,0,1],h=[];function d(t,n,o){c.font=`${o?o+" ":""}${t}px ${a}`,a.font=a,a.modifier=o,a.size=t}function g([t,n,o,e]){c.fillStyle=`rgba(${t}, ${n}, ${o}, ${e})`,p=[t,n,o,e]}function m([t,n,o,e]){c.strokeStyle=`rgba(${t}, ${n}, ${o}, ${e})`,f=[t,n,o,e]}function y(t){c.setLineDash(t),h=t}function b(t){c.lineWidth=t}function P(t){return{type:"polygon",points:t}}c.canvas.width=i,c.canvas.height=r;const V=t(function(t,o,[e,i]){const r=n/t;return P(Array.from(Array(t),(t,n)=>[e+Math.cos(r*n)*o,i+Math.sin(r*n)*o]))},"poly(n:Number, radius:Number, position:Vector)"),k=t(function(t,o,[e,i]){const r=t%2==0?-n/(2*t):Math.PI/(2*t),s=n/t+r;return P(Array.from(Array(t),(t,n)=>[e+Math.cos(s*n)*o,i+Math.sin(s*n)*o]))},"alignedPolygon(n:Number, radius:Number, position:Vector)"),$=t(function([t,n],[o,e]){const i=t/2,r=n/2;return P([[o-i,e-r],[o+i,e-r],[o+i,e+r],[o-i,e+r]])},"rect(dimensions:Vector, position:Vector)"),w=t(function(t,n){return $([t,t],n)},"square(sideLength:Number, position:Vector)"),x=t(function(t,n){return P([t,n])},"line(v1:Vector, v2:Vector)"),T=t(function(t,n,o,e){return{type:"ellipse",rotation:t,radius:n,angle:o,position:e}},"fullEllipse(rotation:Number, radius:Vector, angle:Vector, position:Vector)"),N=t(function(t,o,e){return T(t,o,[0,n],e)},"ellipse(rotation:Number, radius:Vector, position:Vector)"),v=t(function(t,o){return T(0,[t,t],[0,n],o)},"circle(radius:Number, position:Vector)"),S=t(function(t,n,o){return T(0,[t,t],n,o)},"arc(radius:Number, angle:Vector, position:Vector)");function A(t){const{rotation:n,radius:o,angle:e,position:i}=t;c.beginPath(),c.ellipse(...i,...o,n,...e,!1),c.stroke(),c.fill(),c.closePath()}function E(t){const{points:n}=t;c.beginPath(),c.moveTo(...n[0]);for(let o=1;o<n.length;o++)c.lineTo(...n[o]);c.lineTo(...n[0]),c.closePath(),c.stroke(),c.fill()}const C=t(function(t,n){return P(n.points.map(t))},"mapPolygon(fn:Function, polygon:Polygon)"),F=t(function(t,n){const{radius:o,angle:e,rotation:i}=n;return T(i,o,e,t(n))},"mapPosition(fn:Function, ellipse:Ellipse)"),M=t(function(t,n){const{radius:o,angle:e,position:i}=n;return T(t(n),o,e,i)},"mapRotation(fn:Function, ellipse:Ellipse)"),W=t(function(t,n){const{radius:o,position:e,rotation:i}=n;return T(i,o,t(n),e)},"mapAngle(fn:Function, ellipse:Ellipse)"),z=t(function(t,n){const{angle:o,position:e,rotation:i}=n;return T(i,t(n),o,e)},"mapRadius(fn:Function, ellipse:Ellipse)");return{setWidthHeight:function([t,n]){s=t,l=n,c.canvas.width=t,c.canvas.height=n},setCtx:function(t){c=t},fill:g,stroke:m,noStroke:function(){m(o),f=o},noFill:function(){g(o),p=o},dash:y,noDash:function(){c.setLineDash([]),h=[]},background:function([t,n,o,e]){const i=c.fillStyle;c.fillStyle=`rgba(${t}, ${n}, ${o}, ${e})`,c.fillRect(0,0,s,l),c.fillStyle=i},strokeWeight:b,polygon:P,poly:V,alignedPoly:k,rect:$,square:w,line:x,fullEllipse:T,ellipse:N,circle:v,arc:S,drawEllipse:A,drawArc:function(t){const{radius:n,angle:o,position:e}=t;c.beginPath(),c.arc(...e,n[0],...o,!1),c.stroke(),c.fill(),c.closePath()},drawPolygon:E,drawShape:function(t){switch(t.type){case"ellipse":return A(t);case"polygon":return E(t)}},drawLine:function(t){const{points:[[n,o],[e,i]]}=t;c.beginPath(),c.moveTo(n,o),c.lineTo(e,i),c.stroke(),c.closePath()},mapPolygon:C,mapPosition:F,mapRotation:M,mapAngle:W,mapRadius:z,text:function(t,n){c.fillText(t,...n),c.strokeText(t,...n)},centeredText:function(t,n){const o=c.measureText(t);c.fillText(t,n[0]-o.width/2,n[1]+a.size/4),c.strokeText(t,n[0]-o.width/2,n[1]+a.size/4)},setFont:d,font:a,strokeColor:f,fillColor:p,dashVector:h,push:function(){u.push({font:a,strokeColor:f,fillColor:p,dashVector:h,strokeWeight:c.lineWidth})},pop:function(){const t=u.pop();if(!t)throw new Error("No stack to pop");d(t.font.size,t.font.font,t.font.modifier),m(t.strokeColor),g(t.fillColor),y(t.dashVector),b(t.strokeWeight)},ctx:c}}});
},{}],"H99C":[function(require,module,exports) {
var e=require("microcan-fp"),t=64,n=document.getElementById("codeInput"),i=document.getElementById("bpmDisplay"),o=Number(i.innerText),r=[{code:"110 * (b+1)",lines:["This function should always return a frequency","That frequency can be calculated using the arguments","b represents the bar number (0-15)"]},{code:"110 + i",lines:["i represents the cell index (0-127)"]},{code:"220 + sin(t) * 440",lines:["t represents time in seconds since the page loaded"]},{code:"[440,523.25,659.25,783.99][o]",lines:["o represents the offset into the bar (0-3)","You can think of this as the beat"]},{code:"sin(t) * cos(b + t) + tan(i) * 440",lines:["All Math functions are available in the global scope"]},{code:"[0,3,5,7].map(x => T(440, x))[(b + o) % 4]",lines:["The T(base, f) function gives you notes n semitones","from the freq n. Quick shortcut to musicality!"]},{code:"[0,3,5,7].map(x => T(440, x))[(b + o) % 4]",lines:["The T(base, f) function gives you notes n semitones","from the freq n. Quick shortcut to musicality!"]},{code:"[110, 220, 440, NaN][o]",lines:["NaN and other non number values are pauses"]},{code:"[110, 220, 440, 1/0][o]",lines:["Infinity and -Infinity change the wave type"]},{code:"[0,3,5,[-1,6,-7,7][b%4]].map(x=>T(440,x))[(b+o)%4]",lines:["Try to keep it under 64 bytes, and happy hacking!"]}],a=300,c=300,s=document.getElementById("main"),l=s.getContext("2d"),u=e(l,[a,c]),d=function(e,t){return u.drawShape(u.rect(e,t))},m=function(e,t){return u.drawEllipse(u.circle(e,t))};u.fill([255,255,255,1]),u.noStroke();var f=Math.floor(a/20);l.font="".concat(f,"px Courier");var h=l.measureText("Click here to start");if(l.fillText("Click here to start",(a-h.width)/2,(c-f)/2),s.addEventListener("click",v,{once:!0}),location.hash){var p=location.hash.slice(2).split("&").map(function(e){return e.split("=")});p.forEach(function(e){if(2===e.length&&("code"===e[0]&&(n.value=decodeURIComponent(e[1])),"bpm"===e[0])){var t=Number(e[1]);Number.isInteger(t)&&e[1]>=60&&e[1]<=500&&(o=t,i.innerText=o)}})}function v(){var e=["triangle","square","sawtooth","sine"],c=new AudioContext,l=c.createGain();l.connect(c.destination);var f=c.createOscillator();f.connect(l),f.type=e[0],f.frequency.setValueAtTime(880,c.currentTime),l.gain.setValueAtTime(.1,c.currentTime),f.start(),window.addEventListener("blur",function(){l.gain.setValueAtTime(0,c.currentTime)}),window.addEventListener("focus",function(){l.gain.setValueAtTime(.1,c.currentTime)});var h=new Function("b","i","t","o","return "+n.value),p=function(){var e=encodeURIComponent(n.value);history.pushState(null,"","#?bpm=".concat(o,"&code=").concat(e))},v=function(t){E=0,f.type=e[E],h=new Function("b","i","t","o","return "+t),p(),n.value=t};document.getElementById("bpmUp").addEventListener("click",function(){o=Math.min(o+10,500),i.innerText=o,p()}),document.getElementById("bpmDown").addEventListener("click",function(){o=Math.max(o-10,60),i.innerText=o,p()});var b=document.querySelector(".comment"),g=0;s.addEventListener("click",function(){var e=r[g];v(e.code),b.innerHTML=e.lines.map(function(e){return'<div class="comment-line">'.concat(e,"</div>")}).join(""),g=(g+1)%r.length}),Object.getOwnPropertyNames(Math).forEach(function(e){window[e]=Math[e]}),window.T=function(e,t){return e*Math.pow(1.059463,t)};var y=n.classList;n.addEventListener("keydown",function(e){"Enter"===e.key&&v(e.target.value),console.log(e.target.value.length),e.target.value.length>t?y.add("over-limit"):y.remove("over-limit")});var T=4*(a/16/2),k=0,w=0,x=!1,E=0,N=0;!function t(){u.background([0,0,0,1]),u.noFill(),u.stroke([0,0,0,1]);var n=Math.floor(k/4),i=k%4;if(w%Math.round(3600/o)==0){var r;try{r=h(n,k,c.currentTime,i)}catch(M){r=NaN}var a=!1;if((Number.isNaN(r)||"number"!=typeof r)&&(x||(f.disconnect(l),x=!0),a=!0),r===1/0&&(E=(E+1)%e.length,f.type=e[E],a=!0),r===-1/0&&(E=E-1==-1?e.length-1:E-1,f.type=e[E],a=!0),!a){x&&(f.connect(l),x=!1);var s=r;f.frequency.setValueAtTime(s,c.currentTime)}N=r,k=(k+1)%64}for(var p=0,v=0;v<16;v++){var b=floor(v/2)*T;u.push(),u.noStroke(),0===v?u.fill([255,34,68,.2]):(p<2?u.fill([2555,255,255,.2]):u.fill([255,34,68,.2]),p=(p+1)%4),d([4*T,T],[v%2==0?2*T:6*T,b+T/2]),u.pop(),u.strokeWeight(2);for(var g=0;g<4;g++){var y=v%2==0?g*T:4*T+g*T;if(d([T,T],[y+T/2,b+T/2]),v===n&&g===i){if(u.push(),!Number.isNaN(N)){var I=N>440?[255,255,255,1]:[255,34,68,1],q=T/2/2;0===i&&(q*=1.5),N===1/0?(u.noFill(),u.strokeWeight(8),u.stroke(I)):N===-1/0?(u.noFill(),u.strokeWeight(8),u.stroke(I)):(u.noStroke(),u.fill(I)),m(q,[y+T/2,b+T/2])}u.pop()}}}w++,requestAnimationFrame(t)}()}
},{"microcan-fp":"w0rA"}]},{},["H99C"], null)
//# sourceMappingURL=https://francisrstokes.github.io/bito/src.50ef0da5.js.map